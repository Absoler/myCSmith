#! /bin/bash
opt_option=
test_type=
pin_root=
root_dir=
if [ $1 == 0 ] ; then
    compiler=gcc-12.1
elif [ $1 == 1 ] ; then
    compiler=icc
else 
    compiler=clang
fi
$compiler output2.c -gdwarf-4 $opt_option -fsanitize=undefined -w -o output2 -lpthread
$pin_root/pin -t $root_dir/checkAccess/obj-intel64/checkAccess.so -- ./output2 $test_type func ./
objdump -dl output2 > disas